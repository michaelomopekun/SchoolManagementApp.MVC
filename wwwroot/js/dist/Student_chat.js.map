{"version":3,"file":"Student_chat.js","sources":["../ChatService.js","../chat.js","../Student_chat.js"],"sourcesContent":["export default class ChatService {\r\n  static async loadLecturers() {\r\n    const response = await fetch(\"Chat/GetLecturers\");\r\n\r\n    console.log(\r\n      \"Fetching Lecturers from Endpoint, response): \",\r\n      response.json()\r\n    );\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to load lecturers\");\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  static async startChat(lecturerId) {\r\n    const response = await fetch(\"/Chat/StartChat\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ lecturerId }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to start chat\");\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  static async loadMessages(conversationId) {\r\n    const response = await fetch(`/Chat/GetMessages/${conversationId}`);\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to load messages\");\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n\r\n  static async sendMessage(conversationId, content) {\r\n    const response = await fetch(\"/Chat/SendMessage\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ conversationId, content, replyToMessage: null }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n      throw new Error(\"Failed to send message\");\r\n    }\r\n\r\n    return response.json();\r\n  }\r\n}\r\n","import ChatService from \"./ChatService.js\";\r\n\r\n\r\nexport default class Chat {\r\n  constructor(chatContainer, messageList, chatInput, sendButton) {\r\n    this.chatContainer = chatContainer;\r\n\r\n    this.messageList = messageList;\r\n\r\n    this.chatInput = chatInput;\r\n\r\n    this.sendButton = sendButton;\r\n\r\n    this.lecturerDropdown = lecturerDropdown;\r\n\r\n    this.conversationId = null;\r\n\r\n    this.isSendingMessage = false;\r\n\r\n    this.initEventListeners();\r\n\r\n    this.initSignalR();\r\n  }\r\n\r\n\r\n  openChatPopup() \r\n  {\r\n\r\n    console.log(\"Opening chat popup...\");\r\n\r\n    if (this.chatContainer) \r\n    {\r\n      this.chatContainer.style.display = \"block\";\r\n\r\n      if (this.lecturerDropdown) \r\n      {\r\n        this.loadLecturers(this.lecturerDropdown);\r\n      } \r\n      else \r\n      {\r\n        console.error(\"Lecturer dropdown not initialized\");\r\n      }\r\n    } \r\n    else \r\n    {\r\n      console.error(\"Chat container not initialized\");\r\n    }\r\n\r\n  }\r\n\r\n\r\n  closeChatPopup() \r\n  {\r\n    this.chatContainer.style.display = \"none\";\r\n  }\r\n\r\n\r\n  initSignalR() \r\n  {\r\n\r\n    this.connection = new signalR.HubConnectionBuilder()\r\n      .withUrl(\"/chatHub\")\r\n      .withAutomaticReconnect()\r\n      .build();\r\n\r\n    this.connection\r\n      .start()\r\n      .then(() => console.log(\"SignalR connected\"))\r\n      .catch((err) => console.error(\"SignalR Connection Error:\", err));\r\n\r\n    this.connection.on(\"ReceiveMessage\", (message) => \r\n    {\r\n      if (message.conversationId === this.conversationId) \r\n      {\r\n        this.appendMessage(message);\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  async loadLecturers(lecturerDropdown) \r\n  {\r\n\r\n    try \r\n    {\r\n      const lecturers = await ChatService.loadLecturers();\r\n\r\n      lecturerDropdown.innerHTML =\r\n        '<option value=\"\"> Select a Lecturer </option>';\r\n\r\n      lecturers.forEach((lecturer) => {\r\n        const option = document.createElement(\"option\");\r\n\r\n        option.value = lecturer.id;\r\n        option.textContent = `${lecturer.name}`;\r\n\r\n        lecturerDropdown.appendChild(option);\r\n\r\n        console.log(lecturers);\r\n      });\r\n    } \r\n    catch (err) \r\n    {\r\n      console.error(\"Error loading lecturer:\", err);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  async startChat(lecturerId) \r\n  {\r\n\r\n    try \r\n    {\r\n      console.log(\"Starting chat with lecturer:\", lecturerId);\r\n      const data = await ChatService.startChat(lecturerId);\r\n\r\n      if (!data.success) \r\n      {\r\n        throw new Error(data.error || \"Failed to start chat\");\r\n      }\r\n\r\n      this.conversationId = data.conversationId;\r\n      this.chatInput.disabled = false;\r\n      this.sendButton.disabled = false;\r\n\r\n      this.chatMessages.style.display = \"block\";\r\n\r\n      // Update the chat title with the lecturer's name\r\n      if (this.chatTitle && this.lecturerDropdown) \r\n      {\r\n\r\n        const selectedOption =\r\n          this.lecturerDropdown.options[this.lecturerDropdown.selectedIndex];\r\n        this.chatTitle.textContent = `Chat with ${selectedOption.text}`;\r\n\r\n      }\r\n\r\n      // Load existing messages\r\n      await this.loadMessages(this.conversationId);\r\n\r\n      // Join the SignalR group for this conversation\r\n      await this.connection.invoke( \"JoinConversation\", this.conversationId.toString() );\r\n    } \r\n    catch (error) \r\n    {\r\n      console.error(\"Error starting chat:\", error);\r\n      alert(\"Failed to start chat: \" + error.message);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  async loadMessage()\r\n   {\r\n\r\n    try \r\n    {\r\n      const messages = await ChatService.loadMessages( this.currentConversationId );\r\n\r\n      console.log(\"Loaded messages:\", messages);\r\n\r\n      this.messageList.innerHTML = \"\";\r\n\r\n      messages.forEach((message) => this.appendMessage(message));\r\n    } \r\n    catch (err) \r\n    {\r\n      console.error(\"Error loading messages: \", err);\r\n    }\r\n\r\n  }\r\n\r\n\r\n  async sendMessage() \r\n  {\r\n\r\n    if (this.isSendingMessage || !this.chatInput.value.trim()) return;\r\n\r\n    this.isSendingMessage = true;\r\n\r\n    const content = this.chatInput.value.trim();\r\n\r\n    try \r\n    {\r\n      const data = await ChatServices.sendMessage\r\n      (\r\n\r\n        this.currentConversationId,\r\n        content\r\n      \r\n      );\r\n\r\n      this.appendMessage(data.message);\r\n\r\n      this.chatInput.value = \"\";\r\n    } \r\n    catch (err) \r\n    {\r\n      console.error(\"Error sending message: \", err);\r\n    } \r\n    finally \r\n    {\r\n      this.isSendingMessage = false;\r\n    }\r\n\r\n  }\r\n\r\n\r\n  appendMessage(message) \r\n  {\r\n\r\n    const userId = this.chatContainer.dataset.userId;\r\n\r\n    const messageDiv = document.createElement(\"div\");\r\n\r\n    messageDiv.className = `message ${ message.senderId === parseInt(userId) ? \"send\" : \"received\" }`;\r\n\r\n    messageDiv.innerHTML = `<div class = \"message-content\"> ${ message.content } </div>\r\n                            <div class = \"message-time\"> ${new Date( message.sentAt ).toLocaleTimeString()} </div>`;\r\n\r\n    this.messageList.appendChild(messageDiv);\r\n\r\n    this.messageList.scrollTop = this.messageList.scrollHeight;\r\n\r\n  }\r\n\r\n\r\n  initEventListeners() \r\n  {\r\n\r\n    this.sendButton.addEventListener(\"click\", () => this.sendMessage());\r\n\r\n    this.chatInput.addEventListener(\"keypress\", function (e) \r\n    {\r\n\r\n      if (e.key === \"Enter\" && !e.shiftKey) \r\n        {\r\n          \r\n        e.preventDefault();\r\n        this.sendMessage();\r\n      \r\n      }\r\n\r\n    });\r\n    \r\n  }\r\n}\r\n","import Chat from \"./chat.js\";\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", function () {\r\n  // Get DOM elements\r\n  const chatContainer = document.getElementById(\"chat-popup-container\");\r\n  const messageList = document.getElementById(\"message-list\");\r\n  const chatInput = document.getElementById(\"chat-input\");\r\n  const sendButton = document.getElementById(\"send-chat-message\");\r\n  const lecturerDropdown = document.getElementById(\"lecturer-dropdown\");\r\n  const chatTitle = document.getElementById(\"chat-title\");\r\n  const chatMessages = document.getElementById(\"chat-messages\");\r\n\r\n  // Debug DOM elements\r\n  console.log(\"Chat container:\", chatContainer);\r\n  console.log(\"Lecturer dropdown:\", lecturerDropdown);\r\n\r\n  if (!chatContainer || !lecturerDropdown) {\r\n    console.error(\"Required DOM elements are missing.\");\r\n    return;\r\n  }\r\n\r\n  // Initialize chat\r\n  const chat = new Chat(\r\n    chatContainer,\r\n    messageList,\r\n    chatInput,\r\n    sendButton,\r\n    lecturerDropdown,\r\n    chatTitle,\r\n    chatMessages\r\n  );\r\n\r\n  // Handle chat button click\r\n  try {\r\n    document\r\n      .getElementById(\"open-chat-popup\")\r\n      ?.addEventListener(\"click\", () => chat.openChatPopup());\r\n  } catch (error) {\r\n    console.error(\"Error adding event listener to open chat button:\", error);\r\n  }\r\n\r\n  // Handle close button click\r\n  // try {\r\n  //   document\r\n  //     .getElementById(\"close-chat-popup\")\r\n  //     ?.addEventListener(\"click\", () => chat.closeChatPopup());\r\n  // } catch (error) {\r\n  //   console.error(\"Error adding event listener to close chat button:\", error);\r\n  // }\r\n\r\n  // Handle lecturer selection\r\n  lecturerDropdown?.addEventListener(\"change\", async function() {\r\n    const lecturerId = parseInt(this.value, 10);\r\n    console.log(\"Selected lecturer ID:\", lecturerId);\r\n\r\n    if (!lecturerId || isNaN(lecturerId)) {\r\n      console.warn(\"Invalid lecturer ID selected\");\r\n      return;\r\n    }\r\n\r\n    await chat.startChat(lecturerId);\r\n  });\r\n});"],"names":[],"mappings":"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"}